<!DOCTYPE html>  <html> <head>   <title>striker.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               striker.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Striker.js 0.0.1
Bad-ass, greasy-fast, cached calculated collections</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>(c) 2013 Adam Neary, Profitably Inc.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h2>initial setup (similar to backbone.js)</h2>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Save a reference to the global object (<code>window</code> in the browser, <code>exports</code>
on the server).</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Save the previous value of the <code>Striker</code> variable, so that it can be
restored later on, if <code>noConflict</code> is used.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>The top-level namespace. All public Striker classes and modules will
be attached to this. Exported for both CommonJS and the browser.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Current version of the library. Keep in sync with <code>package.json</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Require Backbone, if we're on the server, and it's not already present.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>For Striker's purposes, jQuery, Zepto, or Ender owns the <code>$</code> variable.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Runs Striker.js in <em>noConflict</em> mode, returning the <code>Striker</code> variable
to its previous owner. Returns a reference to this Striker object.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h2>Striker.Collection</h2>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Wrapper for multidimensional arrays. Since in javascript, arrays are
objects (with specific keys), it will not hamper perfomance to store
data as an object rather than an array.</p>

<p>name       - Name of collection (required)
schema     - Sets order and type nested attributes (required)
             data save based on this attribute
multiplier - For percentage data equal 100, by default 1</p>

<p>Examples</p>

<p>class ConversionRates extends Striker.Collection
    name: 'conversionRates'
    schema: ['stageId', 'channelId', 'monthId']
    multiplier: 100</p>

<p>conversionRates = new ConversionRates()
  conversionRates.collections
  # => [Array[stages.length], Array[channels.length], Array[months.length]]</p>

<p>conversionRates.values
  # => object with data
  2: # stage id
    1: # channel id, contains values for every month
      1:  70 # first month id with value
      2:  17 # second month id with value
      #   ...
      36: 27 # last month id with value
    2:
      1:  46
      2:  66
      #   ...
      36: 14
    # other channels with data for stage with id = 2
  3: # another stage id
    1: # channels for another stage
      1:  16
      #   ...
      36: 34
    # other channels with data for stage with id = 3</p>

<p># Get value for stageId = 2 and channelId = 1 and monthId = 36
  conversionRates.get(2, 1, 36)
  # => 27</p>

<p># Set 75% for stageId = 3, channelId = 1 and monthId = 1
  conversionRates.set(75, 3, 1, 1)</p>

<p>conversionRates.isMonth()
  # => true</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Include methods from Backbone.Events for binding support</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Set default multiplier to 1 to avoid altering data unless requested</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Recursive function which uses @inputs and @collections for builds @values
Attributes used for recursive callbacks</p>

<p>Returns object with structured data</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Get value by params</p>

<p>args - Arguments split a comma and bases on schema.
       If schema is ['channelId', 'monthId']
       then get(1,2) will be equal channelId=1 and monthId=2</p>

<p>Examples</p>

<p>conversionRates.get(2, 1, 1)
  # => 70</p>

<p>conversionRates.get(2, 1)
  # => {1: 70, 2: 17, ..., 36: 27}</p>

<p>Returns value or object with group of values</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Changes value and fire trigger <code>change</code></p>

<p>value - New value
args  - Arguments split a comma and bases on schema
        for navigation to specifically value.</p>

<p>Examples</p>

<p>conversionRates.set(45, 2, 1, 1)
  conversionRates.get(2, 1, 1)
  # => 45</p>

<p>Returns nothing.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Combine information for display</p>

<p>Returns array of nested arrays</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Check that collection has monthId attribute</p>

<p>Returns true or false</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Adds specific forecast functionality to BaseCollection</p>

<p>name        - Forecast name (required)
schema      - Schema for attributes (required)
triggers    - Object with functions which called when object was changed
              use short versions of variables from app</p>

<p>Examples</p>

<p>class ConversionForecast extends ForecastCollection
    name: 'conversionForecast'
    schema: ['stageId', 'channelId', 'segmentId', 'monthId']
    triggers:
      toplineGrowth: (args) -> l("toplineGrowth changed with #{args.channelId} and #{args.monthId}")</p>

<p>conversionForecast = new ConversionForecast()</p>

<p># Build forecast based on current inputs
  conversionForecast.build()</p>

<p># Turns on all triggers
  conversionForecast.onTriggers()
  app.toplineGrowth.set(5, 1, 1)
  # => 'toplineGrowth changed'</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Raw method for calculating a forecast value. Extend this.</p>

<p>args - One or more attributes from @schema</p>

<p>Returns not rounded value.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Builds values for every element</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Turns On triggers based on @triggers. Name <code>this</code> uses for self triggers</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Calculates new value based on params and saves to @values</p>

<p>Returns nothing.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Private: pass args as object with params to trigger function</p>

<p>Returns trigger function</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 